{"version":3,"sources":["/home/mayeul/projects/n8n/packages/@n8n/utils/dist/search/reRankSearchResults.cjs","../../src/search/reRankSearchResults.ts"],"names":[],"mappings":"AAAA;ACAO,SAAS,mBAAA,CACf,aAAA,EACA,iBAAA,EACoC;AACpC,EAAA,OAAO,aAAA,CACL,GAAA,CAAI,CAAC,EAAE,KAAA,EAAO,KAAK,CAAA,EAAA,GAAM;AAGzB,IAAA,MAAM,gBAAA,EAAkB,MAAA,CAAO,OAAA,CAAQ,iBAAiB,CAAA,CAAE,MAAA,CAAO,CAAC,GAAA,EAAK,CAAC,CAAA,EAAG,YAAY,CAAA,EAAA,GAAM;AAC5F,MAAA,MAAM,YAAA,EAAc,YAAA,CAAa,IAAA,CAAK,GAAG,CAAA;AACzC,MAAA,GAAA,CAAI,WAAA,EAAa;AAChB,QAAA,OAAO,IAAA,EAAM,WAAA;AAAA,MACd;AAEA,MAAA,OAAO,GAAA;AAAA,IACR,CAAA,EAAG,CAAC,CAAA;AAEJ,IAAA,OAAO;AAAA,MACN,KAAA,EAAO,MAAA,EAAQ,eAAA;AAAA,MACf;AAAA,IACD,CAAA;AAAA,EACD,CAAC,CAAA,CACA,IAAA,CAAK,CAAC,CAAA,EAAG,CAAA,EAAA,GAAM;AACf,IAAA,OAAO,CAAA,CAAE,MAAA,EAAQ,CAAA,CAAE,KAAA;AAAA,EACpB,CAAC,CAAA;AACH;ADPA;AACE;AACF,kDAAC","file":"/home/mayeul/projects/n8n/packages/@n8n/utils/dist/search/reRankSearchResults.cjs","sourcesContent":[null,"export function reRankSearchResults<T extends { key: string }>(\n\tsearchResults: Array<{ score: number; item: T }>,\n\tadditionalFactors: Record<string, Record<string, number>>,\n): Array<{ score: number; item: T }> {\n\treturn searchResults\n\t\t.map(({ score, item }) => {\n\t\t\t// For each additional factor, we check if it exists for the item and type,\n\t\t\t// and if so, we add the score to the item's score.\n\t\t\tconst additionalScore = Object.entries(additionalFactors).reduce((acc, [_, factorScores]) => {\n\t\t\t\tconst factorScore = factorScores[item.key];\n\t\t\t\tif (factorScore) {\n\t\t\t\t\treturn acc + factorScore;\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, 0);\n\n\t\t\treturn {\n\t\t\t\tscore: score + additionalScore,\n\t\t\t\titem,\n\t\t\t};\n\t\t})\n\t\t.sort((a, b) => {\n\t\t\treturn b.score - a.score;\n\t\t});\n}\n"]}