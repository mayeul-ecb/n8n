{"version":3,"sources":["../src/api/versions.ts"],"sourcesContent":["import { INSTANCE_ID_HEADER, INSTANCE_VERSION_HEADER } from '@n8n/constants';\nimport type { INodeParameters } from 'n8n-workflow';\n\nimport { get } from '../utils';\n\nexport interface VersionNode {\n\tname: string;\n\tdisplayName: string;\n\ticon: string;\n\ticonUrl?: string;\n\tdefaults: INodeParameters;\n\ticonData: {\n\t\ttype: string;\n\t\ticon?: string;\n\t\tfileBuffer?: string;\n\t};\n\ttypeVersion?: number;\n}\n\nexport interface Version {\n\tname: string;\n\tnodes: VersionNode[];\n\tcreatedAt: string;\n\tdescription: string;\n\tdocumentationUrl: string;\n\thasBreakingChange: boolean;\n\thasSecurityFix: boolean;\n\thasSecurityIssue: boolean;\n\tsecurityIssueFixVersion: string;\n}\n\nexport interface WhatsNewSection {\n\ttitle: string;\n\tcalloutText: string;\n\tfooter: string;\n\titems: WhatsNewArticle[];\n\tcreatedAt: string;\n\tupdatedAt: string | null;\n}\n\nexport interface WhatsNewArticle {\n\tid: number;\n\tcreatedAt: string;\n\tupdatedAt: string | null;\n\tpublishedAt: string;\n\ttitle: string;\n\tcontent: string;\n}\n\nexport async function getNextVersions(\n\tendpoint: string,\n\tcurrentVersion: string,\n\tinstanceId: string,\n): Promise<Version[]> {\n\tconst headers = { [INSTANCE_ID_HEADER as string]: instanceId };\n\treturn await get(endpoint, currentVersion, {}, headers);\n}\n\nexport async function getWhatsNewSection(\n\tendpoint: string,\n\tcurrentVersion: string,\n\tinstanceId: string,\n): Promise<WhatsNewSection> {\n\tconst headers = {\n\t\t[INSTANCE_ID_HEADER as string]: instanceId,\n\t\t[INSTANCE_VERSION_HEADER as string]: currentVersion,\n\t};\n\treturn await get(endpoint, '', {}, headers);\n}\n"],"mappings":";;;;;AAAA,SAAS,oBAAoB,+BAA+B;AAiD5D,eAAsB,gBACrB,UACA,gBACA,YACqB;AACrB,QAAM,UAAU,EAAE,CAAC,kBAA4B,GAAG,WAAW;AAC7D,SAAO,MAAM,IAAI,UAAU,gBAAgB,CAAC,GAAG,OAAO;AACvD;AAEA,eAAsB,mBACrB,UACA,gBACA,YAC2B;AAC3B,QAAM,UAAU;AAAA,IACf,CAAC,kBAA4B,GAAG;AAAA,IAChC,CAAC,uBAAiC,GAAG;AAAA,EACtC;AACA,SAAO,MAAM,IAAI,UAAU,IAAI,CAAC,GAAG,OAAO;AAC3C;","names":[]}