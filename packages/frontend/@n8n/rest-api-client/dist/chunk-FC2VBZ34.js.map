{"version":3,"sources":["../src/api/communityNodes.ts"],"sourcesContent":["import { NPM_COMMUNITY_NODE_SEARCH_API_URL } from '@n8n/constants';\nimport type { PublicInstalledPackage } from 'n8n-workflow';\n\nimport type { IRestApiContext } from '../types';\nimport { get, post, makeRestApiRequest } from '../utils';\n\nexport async function getInstalledCommunityNodes(\n\tcontext: IRestApiContext,\n): Promise<PublicInstalledPackage[]> {\n\tconst response = await get(context.baseUrl, '/community-packages');\n\treturn response.data || [];\n}\n\nexport async function installNewPackage(\n\tcontext: IRestApiContext,\n\tname: string,\n\tverify?: boolean,\n\tversion?: string,\n): Promise<PublicInstalledPackage> {\n\treturn await post(context.baseUrl, '/community-packages', { name, verify, version });\n}\n\nexport async function uninstallPackage(context: IRestApiContext, name: string): Promise<void> {\n\treturn await makeRestApiRequest(context, 'DELETE', '/community-packages', { name });\n}\n\nexport async function updatePackage(\n\tcontext: IRestApiContext,\n\tname: string,\n\tversion?: string,\n\tchecksum?: string,\n): Promise<PublicInstalledPackage> {\n\treturn await makeRestApiRequest(context, 'PATCH', '/community-packages', {\n\t\tname,\n\t\tversion,\n\t\tchecksum,\n\t});\n}\n\nexport async function getAvailableCommunityPackageCount(): Promise<number> {\n\tconst response = await get(\n\t\tNPM_COMMUNITY_NODE_SEARCH_API_URL,\n\t\t'search?q=keywords:n8n-community-node-package',\n\t);\n\n\treturn response.total || 0;\n}\n"],"mappings":";;;;;;;AAAA,SAAS,yCAAyC;AAMlD,eAAsB,2BACrB,SACoC;AACpC,QAAM,WAAW,MAAM,IAAI,QAAQ,SAAS,qBAAqB;AACjE,SAAO,SAAS,QAAQ,CAAC;AAC1B;AAEA,eAAsB,kBACrB,SACA,MACA,QACA,SACkC;AAClC,SAAO,MAAM,KAAK,QAAQ,SAAS,uBAAuB,EAAE,MAAM,QAAQ,QAAQ,CAAC;AACpF;AAEA,eAAsB,iBAAiB,SAA0B,MAA6B;AAC7F,SAAO,MAAM,mBAAmB,SAAS,UAAU,uBAAuB,EAAE,KAAK,CAAC;AACnF;AAEA,eAAsB,cACrB,SACA,MACA,SACA,UACkC;AAClC,SAAO,MAAM,mBAAmB,SAAS,SAAS,uBAAuB;AAAA,IACxE;AAAA,IACA;AAAA,IACA;AAAA,EACD,CAAC;AACF;AAEA,eAAsB,oCAAqD;AAC1E,QAAM,WAAW,MAAM;AAAA,IACtB;AAAA,IACA;AAAA,EACD;AAEA,SAAO,SAAS,SAAS;AAC1B;","names":[]}