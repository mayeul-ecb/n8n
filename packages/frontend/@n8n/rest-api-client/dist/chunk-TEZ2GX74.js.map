{"version":3,"sources":["../src/api/eventbus.ee.ts"],"sourcesContent":["import type { IDataObject, MessageEventBusDestinationOptions } from 'n8n-workflow';\n\nimport type { IRestApiContext } from '../types';\nimport { makeRestApiRequest } from '../utils';\n\nexport type ApiMessageEventBusDestinationOptions = MessageEventBusDestinationOptions & {\n\tid: string;\n};\n\nexport function hasDestinationId(\n\tdestination: MessageEventBusDestinationOptions,\n): destination is ApiMessageEventBusDestinationOptions {\n\treturn destination.id !== undefined;\n}\n\nexport async function saveDestinationToDb(\n\tcontext: IRestApiContext,\n\tdestination: ApiMessageEventBusDestinationOptions,\n\tsubscribedEvents: string[] = [],\n) {\n\tconst data: IDataObject = {\n\t\t...destination,\n\t\tsubscribedEvents,\n\t};\n\treturn await makeRestApiRequest(context, 'POST', '/eventbus/destination', data);\n}\n\nexport async function deleteDestinationFromDb(context: IRestApiContext, destinationId: string) {\n\treturn await makeRestApiRequest(context, 'DELETE', `/eventbus/destination?id=${destinationId}`);\n}\n\nexport async function sendTestMessageToDestination(\n\tcontext: IRestApiContext,\n\tdestination: ApiMessageEventBusDestinationOptions,\n): Promise<boolean> {\n\tconst data: IDataObject = {\n\t\t...destination,\n\t};\n\treturn await makeRestApiRequest(context, 'GET', '/eventbus/testmessage', data);\n}\n\nexport async function getEventNamesFromBackend(context: IRestApiContext): Promise<string[]> {\n\treturn await makeRestApiRequest(context, 'GET', '/eventbus/eventnames');\n}\n\nexport async function getDestinationsFromBackend(\n\tcontext: IRestApiContext,\n): Promise<MessageEventBusDestinationOptions[]> {\n\treturn await makeRestApiRequest(context, 'GET', '/eventbus/destination');\n}\n"],"mappings":";;;;;AASO,SAAS,iBACf,aACsD;AACtD,SAAO,YAAY,OAAO;AAC3B;AAEA,eAAsB,oBACrB,SACA,aACA,mBAA6B,CAAC,GAC7B;AACD,QAAM,OAAoB;AAAA,IACzB,GAAG;AAAA,IACH;AAAA,EACD;AACA,SAAO,MAAM,mBAAmB,SAAS,QAAQ,yBAAyB,IAAI;AAC/E;AAEA,eAAsB,wBAAwB,SAA0B,eAAuB;AAC9F,SAAO,MAAM,mBAAmB,SAAS,UAAU,4BAA4B,aAAa,EAAE;AAC/F;AAEA,eAAsB,6BACrB,SACA,aACmB;AACnB,QAAM,OAAoB;AAAA,IACzB,GAAG;AAAA,EACJ;AACA,SAAO,MAAM,mBAAmB,SAAS,OAAO,yBAAyB,IAAI;AAC9E;AAEA,eAAsB,yBAAyB,SAA6C;AAC3F,SAAO,MAAM,mBAAmB,SAAS,OAAO,sBAAsB;AACvE;AAEA,eAAsB,2BACrB,SAC+C;AAC/C,SAAO,MAAM,mBAAmB,SAAS,OAAO,uBAAuB;AACxE;","names":[]}