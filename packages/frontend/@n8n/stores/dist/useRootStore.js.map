{"version":3,"sources":["../src/useRootStore.ts"],"sourcesContent":["import { randomString, setGlobalState } from 'n8n-workflow';\nimport { defineStore } from 'pinia';\nimport { computed, ref } from 'vue';\n\nimport { STORES } from './constants';\nimport { getConfigFromMetaTag } from './metaTagConfig';\n\nconst { VUE_APP_URL_BASE_API } = import.meta.env;\n\nexport type RootStoreState = {\n\tbaseUrl: string;\n\trestEndpoint: string;\n\tdefaultLocale: string;\n\tendpointForm: string;\n\tendpointFormTest: string;\n\tendpointFormWaiting: string;\n\tendpointMcp: string;\n\tendpointMcpTest: string;\n\tendpointWebhook: string;\n\tendpointWebhookTest: string;\n\tendpointWebhookWaiting: string;\n\ttimezone: string;\n\texecutionTimeout: number;\n\tmaxExecutionTimeout: number;\n\tversionCli: string;\n\toauthCallbackUrls: object;\n\tn8nMetadata: {\n\t\t[key: string]: string | number | undefined;\n\t};\n\tpushRef: string;\n\turlBaseWebhook: string;\n\turlBaseEditor: string;\n\tinstanceId: string;\n\tbinaryDataMode: 'default' | 'filesystem' | 's3';\n};\n\nexport const useRootStore = defineStore(STORES.ROOT, () => {\n\tconst state = ref<RootStoreState>({\n\t\tbaseUrl: VUE_APP_URL_BASE_API ?? window.BASE_PATH,\n\t\trestEndpoint: getConfigFromMetaTag('rest-endpoint') ?? 'rest',\n\t\tdefaultLocale: 'en',\n\t\tendpointForm: 'form',\n\t\tendpointFormTest: 'form-test',\n\t\tendpointFormWaiting: 'form-waiting',\n\t\tendpointMcp: 'mcp',\n\t\tendpointMcpTest: 'mcp-test',\n\t\tendpointWebhook: 'webhook',\n\t\tendpointWebhookTest: 'webhook-test',\n\t\tendpointWebhookWaiting: 'webhook-waiting',\n\t\ttimezone: 'America/New_York',\n\t\texecutionTimeout: -1,\n\t\tmaxExecutionTimeout: Number.MAX_SAFE_INTEGER,\n\t\tversionCli: '0.0.0',\n\t\toauthCallbackUrls: {},\n\t\tn8nMetadata: {},\n\t\tpushRef: randomString(10).toLowerCase(),\n\t\turlBaseWebhook: 'http://localhost:5678/',\n\t\turlBaseEditor: 'http://localhost:5678',\n\t\tinstanceId: '',\n\t\tbinaryDataMode: 'default',\n\t});\n\n\t// ---------------------------------------------------------------------------\n\t// #region Computed\n\t// ---------------------------------------------------------------------------\n\n\tconst baseUrl = computed(() => state.value.baseUrl);\n\n\tconst formUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointForm}`);\n\n\tconst formTestUrl = computed(() => `${state.value.urlBaseEditor}${state.value.endpointFormTest}`);\n\n\tconst formWaitingUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointFormWaiting}`,\n\t);\n\n\tconst webhookUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointWebhook}`);\n\n\tconst webhookTestUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointWebhookTest}`,\n\t);\n\n\tconst webhookWaitingUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointWebhookWaiting}`,\n\t);\n\n\tconst mcpUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointMcp}`);\n\n\tconst mcpTestUrl = computed(() => `${state.value.urlBaseEditor}${state.value.endpointMcpTest}`);\n\n\tconst pushRef = computed(() => state.value.pushRef);\n\n\tconst binaryDataMode = computed(() => state.value.binaryDataMode);\n\n\tconst defaultLocale = computed(() => state.value.defaultLocale);\n\n\tconst urlBaseEditor = computed(() => state.value.urlBaseEditor);\n\n\tconst instanceId = computed(() => state.value.instanceId);\n\n\tconst versionCli = computed(() => state.value.versionCli);\n\n\tconst OAuthCallbackUrls = computed(() => state.value.oauthCallbackUrls);\n\n\tconst restUrl = computed(() => `${state.value.baseUrl}${state.value.restEndpoint}`);\n\n\tconst executionTimeout = computed(() => state.value.executionTimeout);\n\n\tconst maxExecutionTimeout = computed(() => state.value.maxExecutionTimeout);\n\n\tconst timezone = computed(() => state.value.timezone);\n\n\tconst restApiContext = computed(() => ({\n\t\tbaseUrl: restUrl.value,\n\t\tpushRef: state.value.pushRef,\n\t}));\n\n\t// #endregion\n\n\t// ---------------------------------------------------------------------------\n\t// #region Methods\n\t// ---------------------------------------------------------------------------\n\n\tconst setUrlBaseWebhook = (value: string) => {\n\t\tconst url = value.endsWith('/') ? value : `${value}/`;\n\t\tstate.value.urlBaseWebhook = url;\n\t};\n\n\tconst setUrlBaseEditor = (value: string) => {\n\t\tconst url = value.endsWith('/') ? value : `${value}/`;\n\t\tstate.value.urlBaseEditor = url;\n\t};\n\n\tconst setEndpointForm = (value: string) => {\n\t\tstate.value.endpointForm = value;\n\t};\n\n\tconst setEndpointFormTest = (value: string) => {\n\t\tstate.value.endpointFormTest = value;\n\t};\n\n\tconst setEndpointFormWaiting = (value: string) => {\n\t\tstate.value.endpointFormWaiting = value;\n\t};\n\n\tconst setEndpointWebhook = (value: string) => {\n\t\tstate.value.endpointWebhook = value;\n\t};\n\n\tconst setEndpointWebhookTest = (value: string) => {\n\t\tstate.value.endpointWebhookTest = value;\n\t};\n\n\tconst setEndpointWebhookWaiting = (value: string) => {\n\t\tstate.value.endpointWebhookWaiting = value;\n\t};\n\n\tconst setEndpointMcp = (value: string) => {\n\t\tstate.value.endpointMcp = value;\n\t};\n\n\tconst setEndpointMcpTest = (value: string) => {\n\t\tstate.value.endpointMcpTest = value;\n\t};\n\n\tconst setTimezone = (value: string) => {\n\t\tstate.value.timezone = value;\n\t\tsetGlobalState({ defaultTimezone: value });\n\t};\n\n\tconst setExecutionTimeout = (value: number) => {\n\t\tstate.value.executionTimeout = value;\n\t};\n\n\tconst setMaxExecutionTimeout = (value: number) => {\n\t\tstate.value.maxExecutionTimeout = value;\n\t};\n\n\tconst setVersionCli = (value: string) => {\n\t\tstate.value.versionCli = value;\n\t};\n\n\tconst setInstanceId = (value: string) => {\n\t\tstate.value.instanceId = value;\n\t};\n\n\tconst setOauthCallbackUrls = (value: RootStoreState['oauthCallbackUrls']) => {\n\t\tstate.value.oauthCallbackUrls = value;\n\t};\n\n\tconst setN8nMetadata = (value: RootStoreState['n8nMetadata']) => {\n\t\tstate.value.n8nMetadata = value;\n\t};\n\n\tconst setDefaultLocale = (value: string) => {\n\t\tstate.value.defaultLocale = value;\n\t};\n\n\tconst setBinaryDataMode = (value: RootStoreState['binaryDataMode']) => {\n\t\tstate.value.binaryDataMode = value;\n\t};\n\n\t// #endregion\n\n\treturn {\n\t\tbaseUrl,\n\t\tformUrl,\n\t\tformTestUrl,\n\t\tformWaitingUrl,\n\t\tmcpUrl,\n\t\tmcpTestUrl,\n\t\twebhookUrl,\n\t\twebhookTestUrl,\n\t\twebhookWaitingUrl,\n\t\trestUrl,\n\t\trestApiContext,\n\t\turlBaseEditor,\n\t\tversionCli,\n\t\tinstanceId,\n\t\tpushRef,\n\t\tdefaultLocale,\n\t\tbinaryDataMode,\n\t\tOAuthCallbackUrls,\n\t\texecutionTimeout,\n\t\tmaxExecutionTimeout,\n\t\ttimezone,\n\t\tsetUrlBaseWebhook,\n\t\tsetUrlBaseEditor,\n\t\tsetEndpointForm,\n\t\tsetEndpointFormTest,\n\t\tsetEndpointFormWaiting,\n\t\tsetEndpointWebhook,\n\t\tsetEndpointWebhookTest,\n\t\tsetEndpointWebhookWaiting,\n\t\tsetEndpointMcp,\n\t\tsetEndpointMcpTest,\n\t\tsetTimezone,\n\t\tsetExecutionTimeout,\n\t\tsetMaxExecutionTimeout,\n\t\tsetVersionCli,\n\t\tsetInstanceId,\n\t\tsetOauthCallbackUrls,\n\t\tsetN8nMetadata,\n\t\tsetDefaultLocale,\n\t\tsetBinaryDataMode,\n\t};\n});\n"],"mappings":"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","names":[]}