{"version":3,"sources":["/home/mayeul/projects/n8n/packages/frontend/@n8n/stores/dist/useRootStore.cjs","../src/useRootStore.ts"],"names":[],"mappings":"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","file":"/home/mayeul/projects/n8n/packages/frontend/@n8n/stores/dist/useRootStore.cjs","sourcesContent":[null,"import { randomString, setGlobalState } from 'n8n-workflow';\nimport { defineStore } from 'pinia';\nimport { computed, ref } from 'vue';\n\nimport { STORES } from './constants';\nimport { getConfigFromMetaTag } from './metaTagConfig';\n\nconst { VUE_APP_URL_BASE_API } = import.meta.env;\n\nexport type RootStoreState = {\n\tbaseUrl: string;\n\trestEndpoint: string;\n\tdefaultLocale: string;\n\tendpointForm: string;\n\tendpointFormTest: string;\n\tendpointFormWaiting: string;\n\tendpointMcp: string;\n\tendpointMcpTest: string;\n\tendpointWebhook: string;\n\tendpointWebhookTest: string;\n\tendpointWebhookWaiting: string;\n\ttimezone: string;\n\texecutionTimeout: number;\n\tmaxExecutionTimeout: number;\n\tversionCli: string;\n\toauthCallbackUrls: object;\n\tn8nMetadata: {\n\t\t[key: string]: string | number | undefined;\n\t};\n\tpushRef: string;\n\turlBaseWebhook: string;\n\turlBaseEditor: string;\n\tinstanceId: string;\n\tbinaryDataMode: 'default' | 'filesystem' | 's3';\n};\n\nexport const useRootStore = defineStore(STORES.ROOT, () => {\n\tconst state = ref<RootStoreState>({\n\t\tbaseUrl: VUE_APP_URL_BASE_API ?? window.BASE_PATH,\n\t\trestEndpoint: getConfigFromMetaTag('rest-endpoint') ?? 'rest',\n\t\tdefaultLocale: 'en',\n\t\tendpointForm: 'form',\n\t\tendpointFormTest: 'form-test',\n\t\tendpointFormWaiting: 'form-waiting',\n\t\tendpointMcp: 'mcp',\n\t\tendpointMcpTest: 'mcp-test',\n\t\tendpointWebhook: 'webhook',\n\t\tendpointWebhookTest: 'webhook-test',\n\t\tendpointWebhookWaiting: 'webhook-waiting',\n\t\ttimezone: 'America/New_York',\n\t\texecutionTimeout: -1,\n\t\tmaxExecutionTimeout: Number.MAX_SAFE_INTEGER,\n\t\tversionCli: '0.0.0',\n\t\toauthCallbackUrls: {},\n\t\tn8nMetadata: {},\n\t\tpushRef: randomString(10).toLowerCase(),\n\t\turlBaseWebhook: 'http://localhost:5678/',\n\t\turlBaseEditor: 'http://localhost:5678',\n\t\tinstanceId: '',\n\t\tbinaryDataMode: 'default',\n\t});\n\n\t// ---------------------------------------------------------------------------\n\t// #region Computed\n\t// ---------------------------------------------------------------------------\n\n\tconst baseUrl = computed(() => state.value.baseUrl);\n\n\tconst formUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointForm}`);\n\n\tconst formTestUrl = computed(() => `${state.value.urlBaseEditor}${state.value.endpointFormTest}`);\n\n\tconst formWaitingUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointFormWaiting}`,\n\t);\n\n\tconst webhookUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointWebhook}`);\n\n\tconst webhookTestUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointWebhookTest}`,\n\t);\n\n\tconst webhookWaitingUrl = computed(\n\t\t() => `${state.value.urlBaseEditor}${state.value.endpointWebhookWaiting}`,\n\t);\n\n\tconst mcpUrl = computed(() => `${state.value.urlBaseWebhook}${state.value.endpointMcp}`);\n\n\tconst mcpTestUrl = computed(() => `${state.value.urlBaseEditor}${state.value.endpointMcpTest}`);\n\n\tconst pushRef = computed(() => state.value.pushRef);\n\n\tconst binaryDataMode = computed(() => state.value.binaryDataMode);\n\n\tconst defaultLocale = computed(() => state.value.defaultLocale);\n\n\tconst urlBaseEditor = computed(() => state.value.urlBaseEditor);\n\n\tconst instanceId = computed(() => state.value.instanceId);\n\n\tconst versionCli = computed(() => state.value.versionCli);\n\n\tconst OAuthCallbackUrls = computed(() => state.value.oauthCallbackUrls);\n\n\tconst restUrl = computed(() => `${state.value.baseUrl}${state.value.restEndpoint}`);\n\n\tconst executionTimeout = computed(() => state.value.executionTimeout);\n\n\tconst maxExecutionTimeout = computed(() => state.value.maxExecutionTimeout);\n\n\tconst timezone = computed(() => state.value.timezone);\n\n\tconst restApiContext = computed(() => ({\n\t\tbaseUrl: restUrl.value,\n\t\tpushRef: state.value.pushRef,\n\t}));\n\n\t// #endregion\n\n\t// ---------------------------------------------------------------------------\n\t// #region Methods\n\t// ---------------------------------------------------------------------------\n\n\tconst setUrlBaseWebhook = (value: string) => {\n\t\tconst url = value.endsWith('/') ? value : `${value}/`;\n\t\tstate.value.urlBaseWebhook = url;\n\t};\n\n\tconst setUrlBaseEditor = (value: string) => {\n\t\tconst url = value.endsWith('/') ? value : `${value}/`;\n\t\tstate.value.urlBaseEditor = url;\n\t};\n\n\tconst setEndpointForm = (value: string) => {\n\t\tstate.value.endpointForm = value;\n\t};\n\n\tconst setEndpointFormTest = (value: string) => {\n\t\tstate.value.endpointFormTest = value;\n\t};\n\n\tconst setEndpointFormWaiting = (value: string) => {\n\t\tstate.value.endpointFormWaiting = value;\n\t};\n\n\tconst setEndpointWebhook = (value: string) => {\n\t\tstate.value.endpointWebhook = value;\n\t};\n\n\tconst setEndpointWebhookTest = (value: string) => {\n\t\tstate.value.endpointWebhookTest = value;\n\t};\n\n\tconst setEndpointWebhookWaiting = (value: string) => {\n\t\tstate.value.endpointWebhookWaiting = value;\n\t};\n\n\tconst setEndpointMcp = (value: string) => {\n\t\tstate.value.endpointMcp = value;\n\t};\n\n\tconst setEndpointMcpTest = (value: string) => {\n\t\tstate.value.endpointMcpTest = value;\n\t};\n\n\tconst setTimezone = (value: string) => {\n\t\tstate.value.timezone = value;\n\t\tsetGlobalState({ defaultTimezone: value });\n\t};\n\n\tconst setExecutionTimeout = (value: number) => {\n\t\tstate.value.executionTimeout = value;\n\t};\n\n\tconst setMaxExecutionTimeout = (value: number) => {\n\t\tstate.value.maxExecutionTimeout = value;\n\t};\n\n\tconst setVersionCli = (value: string) => {\n\t\tstate.value.versionCli = value;\n\t};\n\n\tconst setInstanceId = (value: string) => {\n\t\tstate.value.instanceId = value;\n\t};\n\n\tconst setOauthCallbackUrls = (value: RootStoreState['oauthCallbackUrls']) => {\n\t\tstate.value.oauthCallbackUrls = value;\n\t};\n\n\tconst setN8nMetadata = (value: RootStoreState['n8nMetadata']) => {\n\t\tstate.value.n8nMetadata = value;\n\t};\n\n\tconst setDefaultLocale = (value: string) => {\n\t\tstate.value.defaultLocale = value;\n\t};\n\n\tconst setBinaryDataMode = (value: RootStoreState['binaryDataMode']) => {\n\t\tstate.value.binaryDataMode = value;\n\t};\n\n\t// #endregion\n\n\treturn {\n\t\tbaseUrl,\n\t\tformUrl,\n\t\tformTestUrl,\n\t\tformWaitingUrl,\n\t\tmcpUrl,\n\t\tmcpTestUrl,\n\t\twebhookUrl,\n\t\twebhookTestUrl,\n\t\twebhookWaitingUrl,\n\t\trestUrl,\n\t\trestApiContext,\n\t\turlBaseEditor,\n\t\tversionCli,\n\t\tinstanceId,\n\t\tpushRef,\n\t\tdefaultLocale,\n\t\tbinaryDataMode,\n\t\tOAuthCallbackUrls,\n\t\texecutionTimeout,\n\t\tmaxExecutionTimeout,\n\t\ttimezone,\n\t\tsetUrlBaseWebhook,\n\t\tsetUrlBaseEditor,\n\t\tsetEndpointForm,\n\t\tsetEndpointFormTest,\n\t\tsetEndpointFormWaiting,\n\t\tsetEndpointWebhook,\n\t\tsetEndpointWebhookTest,\n\t\tsetEndpointWebhookWaiting,\n\t\tsetEndpointMcp,\n\t\tsetEndpointMcpTest,\n\t\tsetTimezone,\n\t\tsetExecutionTimeout,\n\t\tsetMaxExecutionTimeout,\n\t\tsetVersionCli,\n\t\tsetInstanceId,\n\t\tsetOauthCallbackUrls,\n\t\tsetN8nMetadata,\n\t\tsetDefaultLocale,\n\t\tsetBinaryDataMode,\n\t};\n});\n"]}